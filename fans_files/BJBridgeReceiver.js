isShopeeApp()||(window.BJBridgeReceiver=function(){function e(e){return e.callbackId}function t(e,t){var n=e+curTs();return _[n]=function(e){t(e),delete _[n]},n}function n(t,n){var a=e(t);a in _&&_[a](n)}function a(e,n,a){if(R[e]){if(a)var o=t(e,a);n.callbackId=o,R[e](n)}else;}function o(e,t){"function"==typeof t&&(e in J?J[e](t):r(e,t))}function r(e,t){e in T&&(BJUtil.idx(S,e,function(){})(),T[e].push(t))}function i(e,t){var n=T[e];n?n.forEach(function(e){"function"==typeof e&&e(t)}):(console.warn("Unsupported Bridge Event - "+e),console.warn(t))}function c(e){var t=!1;try{parent.BJUtil.isInModal()}catch(n){log.warn("parent domain is different from current one"),t=!0}if(!t&&parent.BJUtil.isInModal()){for(var a=e.count||1,o=parent;a>1;)o=o.parent,--a;o.BJUtil.viewWillReappearHandler({data:e.data||"{}"}),o.BJUtil.pop()}else BJUtil.goBackOrClose()}function l(e){var t=e.presentModal||e.presentModalWebOnly,n=e.url;if("_blank"==e.target)s(n,!0);else if(t){var a="modal_frame_at_"+curTs();n=generateGetUri(n,{is_panel:1}),BJUtil.navigateModally(n,a)}else s(n)}function s(e,t){window.MALL_HOST_ROOT_URL&&0==e.indexOf("/")&&(e=window.MALL_HOST_ROOT_URL+e),t?window.open(e):location.href=e}function p(e){BJUtil.showWebPopUp(e)}function u(e){BJUtil.showWebPinPopUp(e)}function d(e){BJUtil.showActionSheet(e)}function f(e){BJUtil.showDropDownMenu(e)}function h(e){var t=e.title;t&&BJUtil.configurePageTitle(t)}function b(e){if(e.navbar){if(e.navbar.title){var t={title:e.navbar.title};h(t)}if(e.navbar.rightItemsConfig&&Array.isArray(e.navbar.rightItemsConfig.items)){var n=e.navbar.rightItemsConfig.items,a=$(".btn-bottom-holder");if(0==a.length)return;n.forEach(function(e){if("button"==e.type){var t=e.key||"",n=e.text||"",o=$("<div>").addClass("btn-bottom").attr("data-key",t).text(n);o.on("tap",function(){i("onEventCallback",{key:$(this).data("key")})}),o.appendTo(a),a.removeClass("hidden")}})}}}function g(e){BJUtil.save(e)}function m(e){BJUtil.load(e)}function w(e){var t=e.shopID,n=e.itemID,a=e.ratings;if(t&&n){if(a)var o="/shop/{0}/item/{1}/rating/".f(t,n);else var o="/shop/{0}/item/{1}/comments_new/".f(t,n);bridgeCallHandler("navigate",{url:o,presentModalWebOnly:!0})}}function v(e){var t=parse_get_params(e.path),n=e.path.split("?")[0],a=null;a=e.pcmallBaseUrl?generateGetUri(urljoin(e.pcmallBaseUrl,O[n]||n),t):generateGetUri(W[n],t),a?s(a):console.error("Unsupported AppRoute on web - {0}. Refer to UrlByAppRoute in BJBridgeReceiver.js for supported routes.".f(e.path))}function C(e){isWebChatEnabled()?window.SCInstance&&window.SCInstance.startChat?loggedin?window.SCInstance.startChat(e.shopID,e.userID,e.itemID):askLogin():console.error("Web Chat not supported"):console.warn("Web Chat disabled")}function y(e){isWebChatEnabled()?window.SCInstance&&window.SCInstance.startChat?loggedin?window.SCInstance.startOrderChat(e.shopID,e.userID,e.orderID):askLogin():console.error("Web Chat not supported"):console.warn("Web Chat disabled")}function B(e){var t;if(e)switch(e.redirectTab){case 1:t="/buyer/login/";break;case 0:t="/buyer/login/signup/";break;default:t="/buyer/login/signup/"}else t="/buyer/login/signup/";s(t)}function U(e){n(e,e)}function k(e){var t={};t.deviceID=null,t.deviceFingerprint=$.cookie("SPC_F"),n(e,t)}function I(e){var t=e.text;if(window.clipboardData&&window.clipboardData.setData)return clipboardData.setData("Text",t);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var a=document.createElement("textarea");a.textContent=t,a.style.position="fixed",document.body.appendChild(a),a.select();try{document.execCommand("copy")?n(e):n(e,"error")}catch(o){return console.warn("Copy to clipboard failed.",o),n(e,"error"),!1}finally{document.body.removeChild(a)}}}var D=!1,_={},J={viewWillReappear:function(e){D=!0,BJUtil.viewWillReappear(e)}},T={onEventCallback:[],didTapBack:[],tabShow:[]},S={didTapBack:function(){$(".header .icon_left.ic_arrow_back").off("tap").on("tap",function(){i("didTapBack",{})})}},W={home:"/",me:"/me/",cart:"/buyer/cart/",checkout:"/buyer/w/checkout/confirmation/",paid:"/me/?page=all",unpaid:"/me/","purchases?tab=paid":"/me/","/user/groups/":"/user/groups/"},O={home:"/",me:"/me/",cart:"/cart/",checkout:"/checkout/",paid:"/user/purchase/list/?type=7",unpaid:"/user/purchase/list/?type=9",mycard:"/user/account/payment","purchases?tab=paid":"/me/","/user/groups/":"/user/groups/"},R={popWebView:c,showPopUp:p,showPinPopUp:u,showActionSheet:d,showDropDownMenu:f,navigate:l,configureNavBarTitle:h,configurePage:b,save:g,load:m,showItemComments:w,jump:v,startChat:C,startOrderChat:y,getAppInfo:k,login:B,share:U,copyTextToClipboard:I};return{callHandler:a,registerHandler:o,callCallback:n,triggerBridgeEvent:i}}());
//# sourceMappingURL=../source_maps/BJBridgeReceiver.js.map
